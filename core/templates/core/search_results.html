{% extends 'core/base.html' %}

{% block content %}
<h2>Resultados de búsqueda para "{{ query }}"</h2>

{% if results.variedades %}
    <h3>Variedades</h3>
    <ul>
    {% for result in results.variedades %}
        <li>{{ result.nombre }} - {{ result.descripcion }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.condiciones_cultivo %}
    <h3>Condiciones de Cultivo</h3>
    <ul>
    {% for result in results.condiciones_cultivo %}
        <li>{{ result.variedad.nombre }} - {{ result.tipo_suelo }} - {{ result.nutrientes }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.cultivos %}
    <h3>Cultivos</h3>
    <ul>
    {% for result in results.cultivos %}
        <li>{{ result.variedad.nombre }} - {{ result.cantidad_plantas }} plantas</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.analisis_costos %}
    <h3>Análisis de Costos</h3>
    <ul>
    {% for result in results.analisis_costos %}
        <li>Costo Semilla: {{ result.costo_semilla }} - Costo Sustrato: {{ result.costo_sustrato }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.tratamientos_fitofarmaceuticos %}
    <h3>Tratamientos Fitofarmacéuticos</h3>
    <ul>
    {% for result in results.tratamientos_fitofarmaceuticos %}
        <li>{{ result.variedad.nombre }} - {{ result.tratamiento }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.analisis_calidad %}
    <h3>Análisis de Calidad</h3>
    <ul>
    {% for result in results.analisis_calidad %}
        <li>{{ result.tipo_analisis }} - {{ result.variedad.nombre }} - {{ result.resultado }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.clientes %}
    <h3>Clientes</h3>
    <ul>
    {% for result in results.clientes %}
        <li>{{ result.nombre }} - {{ result.direccion }} - {{ result.telefono }} - {{ result.email }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.tipos_analisis %}
    <h3>Tipos de Análisis</h3>
    <ul>
    {% for tipo in results.tipos_analisis %}
        <li>{{ tipo.nombre }} - {{ tipo.descripcion }} - {{ tipo.metodo }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.muestras %}
    <h3>Muestras</h3>
    <ul>
    {% for result in results.muestras %}
        <li>{{ result.codigo }} - {{ result.cliente.nombre }} - {{ result.tipo_analisis.nombre }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.analisis_programados %}
    <h3>Análisis Programados</h3>
    <ul>
    {% for analisis in results.analisis_programados %}
        <li>{{ analisis.muestra.codigo }} - {{ analisis.tipo_analisis.nombre }} - Prioridad: {{ analisis.prioridad }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.resultados_analisis %}
    <h3>Resultados de Análisis</h3>
    <ul>
    {% for resultado in results.resultados_analisis %}
        <li>{{ resultado.analisis_programado.muestra.codigo }} - {{ resultado.resultados }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.productos %}
    <h3>Productos</h3>
    <ul>
    {% for result in results.productos %}
        <li>{{ result.name }} - {{ result.code }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.stocks %}
    <h3>Stocks</h3>
    <ul>
    {% for stock in results.stocks %}
        <li>{{ stock.product.name }} - Cantidad: {{ stock.quantity }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.sales %}
    <h3>Ventas</h3>
    <ul>
    {% for sale in results.sales %}
        <li>{{ sale.product.name }} - Cantidad: {{ sale.quantity_sold }} - Precio: ${{ sale.unit_price }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.gastos_operativos %}
    <h3>Gastos Operativos</h3>
    <ul>
    {% for gasto in results.gastos_operativos %}
        <li>
            {{ gasto.tipo_gasto }} - {{ gasto.descripcion }} 
            {% if gasto.variedad %}({{ gasto.variedad.nombre }}){% endif %} - ${{ gasto.monto }}
        </li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.ventas %}
    <h3>Ventas</h3>
    <ul>
    {% for venta in results.ventas %}
        <li>
            {{ venta.producto.name }} - {{ venta.cantidad }} unidades 
            {% if venta.variedad %}({{ venta.variedad.nombre }}){% endif %} - ${{ venta.precio_unitario }} por unidad
        </li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.pedidos %}
    <h3>Pedidos</h3>
    <ul>
    {% for pedido in results.pedidos %}
        <li>
            <strong>{{ pedido.producto.name }}</strong>
            {% if pedido.variedad %}{{ pedido.variedad.nombre }}{% endif %} - {{ pedido.cantidad }} unidades
            <br>
            Pedido: {{ pedido.fecha_pedido|date:"F d, Y" }} - Entrega: {{ pedido.fecha_entrega|date:"F d, Y" }}
        </li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.materiales %}
    <h3>Materiales</h3>
    <ul>
    {% for material in results.materiales %}
        <li>{{ material.nombre }} - {{ material.descripcion }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.listas_materiales %}
    <h3>Listas de Materiales</h3>
    <ul>
    {% for lista in results.listas_materiales %}
        <li>{{ lista.nombre_producto }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.planes_produccion %}
    <h3>Planes de Producción</h3>
    <ul>
    {% for plan in results.planes_produccion %}
        <li>{{ plan.nombre }} - {{ plan.detalles }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.tareas_produccion %}
    <h3>Tareas de Producción</h3>
    <ul>
    {% for tarea in results.tareas_produccion %}
        <li>{{ tarea.nombre }} - {{ tarea.descripcion }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.miembros %}
    <h3>Miembros</h3>
    <ul>
    {% for miembro in results.miembros %}
        <li>
            {{ miembro.nombre }} {{ miembro.apellido }}
            <ul>
                <li><strong>Número de Socio:</strong> {{ miembro.numero_socio }}</li>
                <li><strong>Email:</strong> {{ miembro.email }}</li>
                <li><strong>Fecha de Ingreso:</strong> {{ miembro.fecha_ingreso }}</li>
            </ul>
        </li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.cuotas %}
    <h3>Cuotas</h3>
    <ul>
    {% for cuota in results.cuotas %}
        <li>
            {{ cuota.miembro.nombre }} {{ cuota.miembro.apellido }} - 
            Monto: ${{ cuota.monto }} - 
            Fecha de Pago: {{ cuota.fecha_pago }} - 
            Periodo: {{ cuota.get_periodo_display }} - 
            Estado: {% if cuota.pagado %}Pagado{% else %}Pendiente{% endif %}
        </li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.pagos %}
    <h3>Pagos</h3>
    <ul>
    {% for pago in results.pagos %}
        <li>{{ pago.miembro.nombre }} {{ pago.miembro.apellido }} - Monto: ${{ pago.monto }} - Fecha: {{ pago.fecha }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% if results.cannabis_plants %}
    <h3>Resultdados de la Biblioteca de Plantas</h3>
    <ul>
        <h5>Plantas de Cannabis</h5>
    {% for plant in results.cannabis_plants %}
        <li>{{ plant.strain }} - Tipo: {{ plant.plant_type }} - Efectos: {{ plant.effects }}</li>
    {% endfor %}
    </ul>
{% endif %}

{% endblock %}